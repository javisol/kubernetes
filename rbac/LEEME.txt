Crear un usuario: rai y un grupo: nlp-viewers
(creo el usuario en el master también. Lo lógico sería usar el bastión)
en /home/rai/certs irán los ficheros obtenidos

  openssl genrsa -out rai.key 4096
  openssl req -new -key rai.key -out rai.csr -subj "/CN=rai/O=ratoncio"
Hay que localizar la CA de kubernetes (habitualmente está en /etc/kubernetes/pki)
  sudo openssl x509 -req -in rai.csr -CA /etc/kubernetes/pki/ca.crt -CAkey /etc/kubernetes/pki/ca.key -CAcreateserial -out rai.crt -days 1200

se puede obtener el nombre del cluster (kubernetes en este caso) usando
  kubectl config current-context
  kubectl -n kube-system get cm kubeadm-config -o yaml

usando de base el /etc/kubernetes/admin.conf hay que borrar la parte de admin y generar un .kube/config a medida

podría ser útil: https://gardener.cloud/050-tutorials/content/howto/working-with-kubeconfig/

  kubectl config set-credentials rai --client-certificate=/home/rai/certs/rai.crt --client-key=/home/rai/certs/rai.key
  kubectl config set-context rai-context --cluster=kubernetes --namespace=nlp --user=rai
si no se especifica el namespace va contra default
  kubectl config set-context rai-context --cluster=kubernetes --user=rai
  kubectl config use-context rai-context


